{{ define "main" }}
<main class="main wrapper">

  <!-- Bloc Catégories -->
  <section class="categories mb-10">
    <div class="flex flex-wrap gap-2">
      {{ range $name, $taxonomy := .Site.Taxonomies.categories }}
        <a href="{{ "/categories/" | relLangURL }}{{ $name | urlize }}"
           class="inline-block px-3 py-1 rounded-full bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-sm transition">
          {{ $name }} ({{ len $taxonomy }})
        </a>
      {{ end }}
    </div>
  </section>

  <!-- Bloc Articles -->
  <section class="articles">
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {{ range .Paginator.Pages }}
      <article class="card bg-white dark:bg-gray-800 rounded-2xl shadow hover:shadow-lg transition overflow-hidden">
        <a href="{{ .Permalink }}">
          {{ with .Params.cover }}
            {{ with .image }}
              <img src="{{ . | absURL }}"
                  alt="{{ $.Params.cover.alt | default $.Title }}"
                  class="w-full h-48 object-cover">
            {{ end }}
          {{ end }}
          <div class="p-4">
            <h3 class="text-lg font-semibold mb-2">{{ .Title }}</h3>
            <p class="text-sm text-gray-600 dark:text-gray-300 mb-2">
              {{ .Date.Format "02 Jan 2006" }}
              {{ with .Params.categories }}
                — <span class="italic">{{ index . 0 }}</span>
              {{ end }}
            </p>
            {{ with .Summary }}
              <p class="text-gray-700 dark:text-gray-400 text-sm">{{ . | truncate 120 }}</p>
            {{ end }}
          </div>
        </a>
      </article>
      {{ end }}
    </div>

    <!-- Pagination -->
    {{ template "_internal/pagination.html" . }}
  </section>

</main>
{{ end }}
